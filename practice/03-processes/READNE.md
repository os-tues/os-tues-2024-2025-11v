# Работа с файлове

1. Работа с процеси
    - Процесът е програма по време на нейното изпълнение.
    - Всеки адрес има свое адресно пространство със свои сегменти за Програма, Данни и Stack.
    - Всеки процес се идентифицира с Process Identifier (pid).
    - Всеки процес може да създава нови процеси със системното повикване fork(). Създаващият процес се нарича родител, а създаденият – дете.
    - Системното повикване fork() създава абсолютно копие на родителя, което изпълнява същата програма като родителя.
    - Програмата изпълнявана от детето може да бъде сменена с exec().

2. pid_t fork(void)
    - Създава нов процес (дете) – копие на родителя (процеса, който извиква функцията)
    - Върща:
        - 0 в детето.
        - PID на детето в родителя.
        - -1 при грешка.

3. int execl(const char *path, const char *arg, ..., NULL);

    - Описание: Изпълнява програмата, намираща се на path, като замества текущия процес с новата програма.
    - Аргументи:
        - const char *path: Пътят до изпълнимия файл.
        - const char *arg, ...: Аргументите, подадени към новата програма, изброени поотделно (завършващи с NULL).
    - Пример: execl("/bin/ls", "ls", "-l", NULL);

4. int execlp(const char *file, const char *arg, ..., NULL);

    - Описание: Подобно на execl, но търси изпълнимия файл file в директориите, дефинирани от PATH.
    - Аргументи:
        - const char *file: Името на изпълнимия файл (необходима е само името, без път).
        - const char *arg, ...: Аргументите, подадени към новата програма (завършващи с NULL).
    - Пример: execlp("ls", "ls", "-l", NULL);

5. int execle(const char *path, const char *arg, ..., NULL, char *const envp[]);

    - Описание: Подобно на execl, но позволява задаване на собствен масив с променливи на околната среда envp.
    - Аргументи:
        - const char *path: Пътят до изпълнимия файл.
        - const char *arg, ...: Аргументите, подадени към новата програма (завършващи с NULL).
        - char *const envp[]: Масив с указатели към низове, дефиниращи новата среда.
    - Пример: execle("/bin/ls", "ls", "-l", NULL, envp);

6. int execv(const char *path, char *const argv[]);

    - Описание: Подобно на execl, но аргументите се предават като масив argv, вместо изброяване поотделно.
    - Аргументи:
        - const char *path: Пътят до изпълнимия файл.
        - char *const argv[]: Масив от аргументи, като първият е името на програмата.
    - Пример: execv("/bin/ls", argv);

7. int execvp(const char *file, char *const argv[]);

    - Описание: Подобно на execv, но търси изпълнимия файл file в директориите, дефинирани от PATH.
    - Аргументи:
        - const char *file: Името на изпълнимия файл (търси се по PATH).
        - char *const argv[]: Масив от аргументи, като първият е името на програмата.
    - Пример: execvp("ls", argv);

8. int execve(const char *pathname, char *const argv[], char *const envp[]);

    - Описание: Подобно на execv, но позволява задаване на собствен масив с променливи на околната среда envp.
    - Аргументи:
        - const char *pathname: Пътят до изпълнимия файл.
        - char *const argv[]: Масив от аргументи, като първият е името на програмата.char *const envp[]: Масив с указатели към низове, дефиниращи новата среда.
    - Пример: execve("/bin/ls", argv, envp);

9. pid_t wait(int *status);

    - Родителя изчаква докато детето приключи изпълнението на програмата.
    - Аргументи:
        - int *status : Указател към integer, който запазва стойността върната от main() функцията на програмата на детето (optional).
    - Връща:
        - PID на детето при успех.
        - -1 при грешка или ако текущия процес няма деца.

10. int kill(pid_t pid, int sig);

    - Изпраща сигнал към процес.
    - Аргументи:
        - pid_t pid : pid на процеса, към който ще изпратим сигнал.
        - > 0: изпраща сигнал до един процес идентифициран с pid.
        - Изпраща сигнал до всички процеси в групата на извикващия.
        - Изпращане на сигнал до всички процеси, към които извикващия има правомощия да праща сигнали.
        - int sig : номер на сигнала (напр. SIGKILL, SIGTERM, SIGSTOP)
    Връща:
        - 0 при успех
        - -1 при грешка

11. сигнали

| Сигнал   | Име  | Описание (на български)  | Поведение  |
|----------|--------------------------|--------------------------|--------------|
| SIGINT   | Interrupt               | Сигнал за прекъсване, обикновено изпращан чрез Ctrl+C. Спира програмата. | Може да бъде обработен или игнориран от процеса. |
| SIGTERM  | Terminate               | Сигнал за завършване на процеса. | Може да бъде обработен или игнориран от процеса. |
| SIGKILL  | Kill                    | Прекратява процеса незабавно. Не може да бъде прихванат или игнориран. | Подсигурява, че процесът е терминиран. |
| SIGSTOP  | Stop                    | Спира изпълнението на процеса. Не може да бъде прихванат или игнориран. | Процесът е паузиран, докато получи SIGCONT. |
| SIGCHLD  | Child                   | Изпраща се към родителски процес, когато негово дете завърши или бъде спряно. | - |
| SIGCONT  | Continue                | Възобновява изпълнението на спрян процес. | - |


12. Полезни header файлове

    - <unistd.h>: Основни POSIX системни повиквания
        - Описание:Съдържа декларации на основни POSIX функции и системни извиквания за работа с процеси, файлове и директории.
        - Включени функции:
            - fork(): Създава нов процес.
            - exec(): Стартира нова програма в текущия процес.
            - getpid(): Връща идентификатора на процеса (PID).
            - getppid(): Връща идентификатора на родителския процес.
            - sleep(): Задържа изпълнението на процеса за определено време.
            - pipe(): Създава комуникационен канал (pipe) между процеси.

    - <sys/types.h>: Дефиниции на типове данни
        - Описание:Дефинира специални типове данни, използвани в системните извиквания.
        - Включени типове:
            - pid_t: Тип за идентификатор на процес (PID).
            - uid_t: Тип за идентификатор на потребител (UID).
            - gid_t: Тип за идентификатор на група (GID).
            - off_t: Тип за отместване във файл

    - <signal.h>: Обработка на сигнали
        - Описание:Съдържа декларации за функции и константи за работа със сигнали.
        - Включени функции и дефиниции:
        - kill(): Изпраща сигнал на процес.
            - signal(): Задава обработчик за сигнал (signal handler).
            - raise(): Изпраща сигнал на текущия процес.
            - Сигнали като SIGINT, SIGTERM, SIGKILL, SIGSTOP: Често използвани сигнали за управление на процеси.

    - <sys/wait.h>: Синхронизация на процеси
        - Описание:Предоставя функции и макроси за работа с родителски и дъщерни процеси.
        - Включени функции и макроси:
            - wait(): Изчаква приключването на дъщерен процес.
            - waitpid(): Изчаква конкретен дъщерен процес.
            - WIFEXITED(status): Проверява дали процесът е приключил нормално.
            - WEXITSTATUS(status): Връща кода на изход на приключилия процес.

13. Zombie процеси

    - Zombie процесът е процес, който е завършил изпълнението си, но все още има запис в таблицата на процесите.

    - Възниква, когато дъщерен процес приключи, но родителският процес не е извикал системното повикване wait() или waitpid(), за да "събере" (reap) статуса на завършване.

    - Zombie процесът не използва ресурси на процесора или памет, но заема място в таблицата на процесите.

14. Orphan процеси

    - Orphan процес е процес, чийто родителски процес е приключил, докато дъщерният все още работи.

    - Orphan процеси се поемат от процеса init (PID 1), който автоматично ги управлява и "събира“(reap) при завършване.

15. Задача 1

Да се реализира програма, която имитира shell, като изпълнява командите в отделни процеси.

16. Задача 2

Симулация на zombie процеси.